<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="ggbraid">
<title>NBA Finals Game • ggbraid</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="NBA Finals Game">
<meta property="og:description" content="ggbraid">
<meta property="og:image" content="https://nsgrantham.github.io/ggbraid/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">ggbraid</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.3</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/temps.html">Average Daily Temperatures</a>
    <a class="dropdown-item" href="../articles/hoops.html">NBA Finals Game</a>
    <a class="dropdown-item" href="../articles/court.html">US Supreme Court</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/nsgrantham/ggbraid/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>NBA Finals Game</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/nsgrantham/ggbraid/blob/HEAD/vignettes/articles/hoops.Rmd" class="external-link"><code>vignettes/articles/hoops.Rmd</code></a></small>
      <div class="d-none name"><code>hoops.Rmd</code></div>
    </div>

    
    
<div class="alert alert-info">
<p>This article demonstrates how to use <code><a href="../reference/geom_braid.html">geom_braid()</a></code> with
<code>method = 'step'</code> to fill the area between two alternating
steps drawn with <code><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_step()</a></code>.</p>
</div>
<p>Let’s take a look at the points scored during a professional
basketball game.</p>
<div class="section level2">
<h2 id="getting-started">Getting Started<a class="anchor" aria-label="anchor" href="#getting-started"></a>
</h2>
<p>ggbraid provides a data frame called <code>hoops</code> with the
points scored throughout the course of Game 1 of the 2018 National
Basketball Association (NBA) Finals between the Golden State Warriors
and the Cleveland Cavaliers.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://nsgrantham.github.io/ggbraid/">ggbraid</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://wilkelab.org/ggtext/" class="external-link">ggtext</a></span><span class="op">)</span>  <span class="co"># element_markdown()</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org" class="external-link">tidyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/tidyverse/glue" class="external-link">glue</a></span><span class="op">)</span>    <span class="co"># glue()</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://hms.tidyverse.org/" class="external-link">hms</a></span><span class="op">)</span>     <span class="co"># as_hms()</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">hoops</span><span class="op">)</span></span>
<span></span>
<span><span class="va">hoops</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 129 × 3</span></span></span>
<span><span class="co">#&gt;    time   team  points</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;time&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 00<span style="color: #949494;">'</span>00<span style="color: #949494;">"</span> CLE        0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 00<span style="color: #949494;">'</span>00<span style="color: #949494;">"</span> GSW        0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 00<span style="color: #949494;">'</span>50<span style="color: #949494;">"</span> CLE        2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 01<span style="color: #949494;">'</span>23<span style="color: #949494;">"</span> CLE        2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 02<span style="color: #949494;">'</span>01<span style="color: #949494;">"</span> GSW        3</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 02<span style="color: #949494;">'</span>20<span style="color: #949494;">"</span> CLE        2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 02<span style="color: #949494;">'</span>33<span style="color: #949494;">"</span> GSW        2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 02<span style="color: #949494;">'</span>33<span style="color: #949494;">"</span> GSW        1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 02<span style="color: #949494;">'</span>43<span style="color: #949494;">"</span> CLE        1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 02<span style="color: #949494;">'</span>43<span style="color: #949494;">"</span> CLE        1</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 119 more rows</span></span></span></code></pre></div>
<p><code>time</code> is game time in <code>MM'SS"</code> format,
<code>team</code> is the team responsible for scoring, Golden State
Warriors (<code>GSW</code>) or Cleveland Cavaliers (<code>CLE</code>),
and <code>points</code> is the number of points scored, either 1, 2, or
3 (or 0, simply marking the start and end of the game).</p>
</div>
<div class="section level2">
<h2 id="cumulative-score">Cumulative Score<a class="anchor" aria-label="anchor" href="#cumulative-score"></a>
</h2>
<p>Let’s transform <code>hoops</code> into <code>hoops_score</code> with
the cumulative score for each team over time.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">hoops_score</span> <span class="op">&lt;-</span> <span class="va">hoops</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">team</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>score <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cumsum.html" class="external-link">cumsum</a></span><span class="op">(</span><span class="va">points</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">ungroup</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">hoops_score</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 129 × 4</span></span></span>
<span><span class="co">#&gt;    time   team  points score</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;time&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 00<span style="color: #949494;">'</span>00<span style="color: #949494;">"</span> CLE        0     0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 00<span style="color: #949494;">'</span>00<span style="color: #949494;">"</span> GSW        0     0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 00<span style="color: #949494;">'</span>50<span style="color: #949494;">"</span> CLE        2     2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 01<span style="color: #949494;">'</span>23<span style="color: #949494;">"</span> CLE        2     4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 02<span style="color: #949494;">'</span>01<span style="color: #949494;">"</span> GSW        3     3</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 02<span style="color: #949494;">'</span>20<span style="color: #949494;">"</span> CLE        2     6</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 02<span style="color: #949494;">'</span>33<span style="color: #949494;">"</span> GSW        2     5</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 02<span style="color: #949494;">'</span>33<span style="color: #949494;">"</span> GSW        1     6</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 02<span style="color: #949494;">'</span>43<span style="color: #949494;">"</span> CLE        1     7</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 02<span style="color: #949494;">'</span>43<span style="color: #949494;">"</span> CLE        1     8</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 119 more rows</span></span></span></code></pre></div>
<p>Now plot the cumulative scores with <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot()</a></code> and
<code><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_step()</a></code>.<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;Why &lt;code&gt;&lt;a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link"&gt;geom_step()&lt;/a&gt;&lt;/code&gt; rather than
&lt;code&gt;&lt;a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link"&gt;geom_line()&lt;/a&gt;&lt;/code&gt;? After a team scores points, it remains at that
score until the next time it scores points — there is a distinct jump,
or step, that happens. Using &lt;code&gt;&lt;a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link"&gt;geom_line()&lt;/a&gt;&lt;/code&gt; to connect the
scores between these two moments would suggest that the team is
gradually accumulating points over time, and that is not the case.&lt;/p&gt;'><sup>1</sup></a></p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">hoops_score</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_step</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">time</span>, y <span class="op">=</span> <span class="va">score</span>, color <span class="op">=</span> <span class="va">team</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="hoops_files/figure-html/hoops-score-plot-1.png" width="100%"></p>
<p>Not bad.</p>
<p>But come to think of it, there is not a compelling reason to show
<em>cumulative</em> score — there are no negative points in basketball
so the cumulative score always goes up and to the right. Displaying the
data this way does not add any value.</p>
<p>What we really care about is the <em>score margin</em>, the
difference in score between GSW and CLE at any point during the
game.</p>
</div>
<div class="section level2">
<h2 id="score-margin">Score Margin<a class="anchor" aria-label="anchor" href="#score-margin"></a>
</h2>
<p>Transform <code>hoops</code> into <code>hoops_wide</code> with
<code>cle</code> as the cumulative score of the Cavaliers,
<code>gsw</code> as the cumulative score of the Warriors, and
<code>diff</code> as the difference between them
(<code>gsw - cle</code>).</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">hoops_wide</span> <span class="op">&lt;-</span> <span class="va">hoops</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">time</span>, <span class="va">team</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarize</a></span><span class="op">(</span>points <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">points</span><span class="op">)</span>, .groups <span class="op">=</span> <span class="st">"drop"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html" class="external-link">pivot_wider</a></span><span class="op">(</span>names_from <span class="op">=</span> <span class="va">team</span>, values_from <span class="op">=</span> <span class="va">points</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename_with</a></span><span class="op">(</span><span class="va">tolower</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/replace_na.html" class="external-link">replace_na</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>cle <span class="op">=</span> <span class="fl">0</span>, gsw <span class="op">=</span> <span class="fl">0</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    cle <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cumsum.html" class="external-link">cumsum</a></span><span class="op">(</span><span class="va">cle</span><span class="op">)</span>,</span>
<span>    gsw <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cumsum.html" class="external-link">cumsum</a></span><span class="op">(</span><span class="va">gsw</span><span class="op">)</span>,</span>
<span>    diff <span class="op">=</span> <span class="va">gsw</span> <span class="op">-</span> <span class="va">cle</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">hoops_wide</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 108 × 4</span></span></span>
<span><span class="co">#&gt;    time     cle   gsw  diff</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;time&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 00<span style="color: #949494;">'</span>00<span style="color: #949494;">"</span>     0     0     0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 00<span style="color: #949494;">'</span>50<span style="color: #949494;">"</span>     2     0    -<span style="color: #BB0000;">2</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 01<span style="color: #949494;">'</span>23<span style="color: #949494;">"</span>     4     0    -<span style="color: #BB0000;">4</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 02<span style="color: #949494;">'</span>01<span style="color: #949494;">"</span>     4     3    -<span style="color: #BB0000;">1</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 02<span style="color: #949494;">'</span>20<span style="color: #949494;">"</span>     6     3    -<span style="color: #BB0000;">3</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 02<span style="color: #949494;">'</span>33<span style="color: #949494;">"</span>     6     6     0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 02<span style="color: #949494;">'</span>43<span style="color: #949494;">"</span>     8     6    -<span style="color: #BB0000;">2</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 02<span style="color: #949494;">'</span>57<span style="color: #949494;">"</span>     8     8     0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 03<span style="color: #949494;">'</span>23<span style="color: #949494;">"</span>     8    10     2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 03<span style="color: #949494;">'</span>35<span style="color: #949494;">"</span>    10    10     0</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 98 more rows</span></span></span></code></pre></div>
<p>Now plot <code>hoops_wide</code> and add a horizontal line at 0
indicating a tied game.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">hoops_wide</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_step</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">time</span>, y <span class="op">=</span> <span class="va">diff</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external-link">geom_hline</a></span><span class="op">(</span>yintercept <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span></code></pre></div>
<p><img src="hoops_files/figure-html/hoops-wide-plot-1.png" width="100%"></p>
<p>Better!</p>
<p>Let’s improve the aesthetics and add details that make it more clear
what’s going on.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gsw_color</span> <span class="op">&lt;-</span> <span class="st">"#006BB6"</span></span>
<span><span class="va">cle_color</span> <span class="op">&lt;-</span> <span class="st">"#860038"</span></span>
<span></span>
<span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">hoops_wide</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_step</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">time</span>, y <span class="op">=</span> <span class="va">diff</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external-link">geom_hline</a></span><span class="op">(</span>yintercept <span class="op">=</span> <span class="fl">0</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_date.html" class="external-link">scale_x_time</a></span><span class="op">(</span></span>
<span>    breaks <span class="op">=</span> <span class="fu"><a href="https://hms.tidyverse.org/reference/hms.html" class="external-link">as_hms</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"00:00:00"</span>, <span class="st">"00:12:00"</span>, <span class="st">"00:24:00"</span>, <span class="st">"00:36:00"</span>, <span class="st">"00:48:00"</span>, <span class="st">"00:53:00"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"00:00"</span>, <span class="st">"12:00"</span>, <span class="st">"24:00"</span>, <span class="st">"36:00"</span>, <span class="st">"48:00"</span>, <span class="st">"53:00"</span><span class="op">)</span>,</span>
<span>    expand <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.015</span>, <span class="op">-</span><span class="fl">0.015</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_y_continuous</a></span><span class="op">(</span></span>
<span>    breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="op">-</span><span class="fl">12</span>, <span class="fl">12</span>, by <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>    labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https://glue.tidyverse.org/reference/glue.html" class="external-link">glue</a></span><span class="op">(</span><span class="st">"&lt;span style='color:{cle_color}'&gt;+{12:1}&lt;/span&gt;"</span><span class="op">)</span>,</span>
<span>      <span class="st">"&lt;span style='color:black'&gt;0&lt;/span&gt;"</span>,</span>
<span>      <span class="fu"><a href="https://glue.tidyverse.org/reference/glue.html" class="external-link">glue</a></span><span class="op">(</span><span class="st">"&lt;span style='color:{gsw_color}'&gt;+{1:12}&lt;/span&gt;"</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_fill_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">cle_color</span>, <span class="va">gsw_color</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guides.html" class="external-link">guides</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/annotate.html" class="external-link">annotate</a></span><span class="op">(</span><span class="st">"text"</span>, x <span class="op">=</span> <span class="fu"><a href="https://hms.tidyverse.org/reference/hms.html" class="external-link">as_hms</a></span><span class="op">(</span><span class="st">"00:06:00"</span><span class="op">)</span>, y <span class="op">=</span> <span class="fl">11</span>, label <span class="op">=</span> <span class="st">"Q1"</span>, size <span class="op">=</span> <span class="fl">6</span>, color <span class="op">=</span> <span class="st">"lightgrey"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/annotate.html" class="external-link">annotate</a></span><span class="op">(</span><span class="st">"text"</span>, x <span class="op">=</span> <span class="fu"><a href="https://hms.tidyverse.org/reference/hms.html" class="external-link">as_hms</a></span><span class="op">(</span><span class="st">"00:18:00"</span><span class="op">)</span>, y <span class="op">=</span> <span class="fl">11</span>, label <span class="op">=</span> <span class="st">"Q2"</span>, size <span class="op">=</span> <span class="fl">6</span>, color <span class="op">=</span> <span class="st">"lightgrey"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/annotate.html" class="external-link">annotate</a></span><span class="op">(</span><span class="st">"text"</span>, x <span class="op">=</span> <span class="fu"><a href="https://hms.tidyverse.org/reference/hms.html" class="external-link">as_hms</a></span><span class="op">(</span><span class="st">"00:30:00"</span><span class="op">)</span>, y <span class="op">=</span> <span class="fl">11</span>, label <span class="op">=</span> <span class="st">"Q3"</span>, size <span class="op">=</span> <span class="fl">6</span>, color <span class="op">=</span> <span class="st">"lightgrey"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/annotate.html" class="external-link">annotate</a></span><span class="op">(</span><span class="st">"text"</span>, x <span class="op">=</span> <span class="fu"><a href="https://hms.tidyverse.org/reference/hms.html" class="external-link">as_hms</a></span><span class="op">(</span><span class="st">"00:42:00"</span><span class="op">)</span>, y <span class="op">=</span> <span class="fl">11</span>, label <span class="op">=</span> <span class="st">"Q4"</span>, size <span class="op">=</span> <span class="fl">6</span>, color <span class="op">=</span> <span class="st">"lightgrey"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/annotate.html" class="external-link">annotate</a></span><span class="op">(</span><span class="st">"text"</span>, x <span class="op">=</span> <span class="fu"><a href="https://hms.tidyverse.org/reference/hms.html" class="external-link">as_hms</a></span><span class="op">(</span><span class="st">"00:50:30"</span><span class="op">)</span>, y <span class="op">=</span> <span class="fl">11</span>, label <span class="op">=</span> <span class="st">"OT1"</span>, size <span class="op">=</span> <span class="fl">6</span>, color <span class="op">=</span> <span class="st">"lightgrey"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"2018 NBA Finals Game 1"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="fu"><a href="https://glue.tidyverse.org/reference/glue.html" class="external-link">glue</a></span><span class="op">(</span><span class="st">"&lt;span style='color:{gsw_color};'&gt;Golden State Warriors&lt;/span&gt; vs. &lt;span style='color:{cle_color}'&gt;Cleveland Cavaliers&lt;/span&gt;"</span><span class="op">)</span>,</span>
<span>    y <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>    x <span class="op">=</span> <span class="cn">NULL</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span>base_size <span class="op">=</span> <span class="fl">13</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span></span>
<span>    plot.title <span class="op">=</span> <span class="fu"><a href="https://wilkelab.org/ggtext/reference/element_markdown.html" class="external-link">element_markdown</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">18</span><span class="op">)</span>,</span>
<span>    plot.title.position <span class="op">=</span> <span class="st">"plot"</span>,</span>
<span>    plot.subtitle <span class="op">=</span> <span class="fu"><a href="https://wilkelab.org/ggtext/reference/element_markdown.html" class="external-link">element_markdown</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">14</span>, margin <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">margin</a></span><span class="op">(</span>b <span class="op">=</span> <span class="fl">1</span>, unit <span class="op">=</span> <span class="st">"line"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    axis.text.y <span class="op">=</span> <span class="fu"><a href="https://wilkelab.org/ggtext/reference/element_markdown.html" class="external-link">element_markdown</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    axis.text.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"grey60"</span><span class="op">)</span>,</span>
<span>    panel.grid.major.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_line</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span>,</span>
<span>    panel.grid.major.y <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_line</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">0.3</span><span class="op">)</span>,</span>
<span>    panel.grid.minor.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    panel.grid.minor.y <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<div class="alert alert-info">
<p>#&gt;  [1m [22mThe <code>size</code> argument of
<code><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_line()</a></code> is deprecated as of ggplot2 3.4.0. #&gt;
 [36mℹ [39m Please use the <code>linewidth</code> argument instead.</p>
</div>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">p</span></span></code></pre></div>
<p><img src="hoops_files/figure-html/hoops-wide-plot-polished-1.png" width="100%"></p>
<p>With the data displayed this way, it’s easy to see how the game
progressed.</p>
<p>After an initial struggle in Q1, the Cavaliers took an early lead in
Q2 only to have the Warriors claw it all back to even the score at
halftime. In Q3, the Warriors claimed the lead, then lost it, and
reclaimed it. And in Q4, the Cavaliers again evened the score, ending
the game with a tie and sending the teams into a 5-minute overtime
(OT1). The Warriors quickly gained the upper hand in overtime and won
the game by 10 points.</p>
</div>
<div class="section level2">
<h2 id="braiding-steps">Braiding Steps<a class="anchor" aria-label="anchor" href="#braiding-steps"></a>
</h2>
<p>As an additional detail, suppose we want to fill the region between
the score margin steps and the horizontal line at 0.</p>
<p>Maybe we can use <code><a href="https://ggplot2.tidyverse.org/reference/geom_ribbon.html" class="external-link">geom_ribbon()</a></code> to do this?</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_ribbon.html" class="external-link">geom_ribbon</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">time</span>, ymin <span class="op">=</span> <span class="va">diff</span>, ymax <span class="op">=</span> <span class="fl">0</span><span class="op">)</span>,</span>
<span>    alpha <span class="op">=</span> <span class="fl">0.2</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p><img src="hoops_files/figure-html/geom-ribbon-hoops-1.png" width="100%"></p>
<p>Hmm, that didn’t work.</p>
<p><code><a href="https://ggplot2.tidyverse.org/reference/geom_ribbon.html" class="external-link">geom_ribbon()</a></code> cannot draw a ribbon between series drawn
with <code><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_step()</a></code> — at least, not without a little help. The
<a href="https://github.com/hrbrmstr/ggalt" class="external-link">ggalt</a> package provides a
<code>stat_stepribbon()</code> function that <code><a href="https://ggplot2.tidyverse.org/reference/geom_ribbon.html" class="external-link">geom_ribbon()</a></code>
can use to draw “step ribbons.”</p>
<p>ggbraid offers similar functionality. Simply replace
<code><a href="https://ggplot2.tidyverse.org/reference/geom_ribbon.html" class="external-link">geom_ribbon()</a></code> with <code><a href="../reference/geom_braid.html">geom_braid()</a></code> and set
<code>method = "step"</code>.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/geom_braid.html">geom_braid</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">time</span>, ymin <span class="op">=</span> <span class="va">diff</span>, ymax <span class="op">=</span> <span class="fl">0</span><span class="op">)</span>,</span>
<span>    method <span class="op">=</span> <span class="st">"step"</span>,</span>
<span>    alpha <span class="op">=</span> <span class="fl">0.2</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p><img src="hoops_files/figure-html/geom-braid-hoops-without-fill-1.png" width="100%"></p>
<p>While we’re at it, why don’t we color the ribbon differently
depending on the team that is winning?</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/geom_braid.html">geom_braid</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">time</span>, ymin <span class="op">=</span> <span class="va">diff</span>, ymax <span class="op">=</span> <span class="fl">0</span>, fill <span class="op">=</span> <span class="va">diff</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span>,</span>
<span>    method <span class="op">=</span> <span class="st">"step"</span>,</span>
<span>    alpha <span class="op">=</span> <span class="fl">0.7</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p><img src="hoops_files/figure-html/geom-braid-hoops-with-fill-1.png" width="100%"></p>
<p>😎🏀</p>
</div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by <a href="https://twitter.com/nsgrantham" class="external-link">Neal Grantham</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
